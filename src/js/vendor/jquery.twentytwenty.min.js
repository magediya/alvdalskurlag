!function(e){e.fn.beforeafter=function(t){t=e.extend({default_offset_pct:.5,orientation:"horizontal",before_label:"Before",after_label:"After",no_overlay:!1,move_slider_on_hover:!1,move_with_handle_only:!0,click_to_move:!1},t);return this.each(function(){var a=t.default_offset_pct,o=e(this),r=t.orientation,i="vertical"===r?"down":"left",n="vertical"===r?"up":"right";if(o.wrap("<div class='beforeafter-wrapper beforeafter-"+r+"'></div>"),!t.no_overlay){o.append("<div class='beforeafter-overlay'></div>");var f=o.find(".beforeafter-overlay");f.append("<div class='beforeafter-before-label' data-content='"+t.before_label+"'></div>"),f.append("<div class='beforeafter-after-label' data-content='"+t.after_label+"'></div>")}var s=o.find("img:first"),c=o.find("img:last");o.append("<div class='beforeafter-handle'></div>");var l=o.find(".beforeafter-handle");l.append("<span class='beforeafter-"+i+"-arrow'></span>"),l.append("<span class='beforeafter-"+n+"-arrow'></span>"),o.addClass("beforeafter-container"),s.addClass("beforeafter-before"),c.addClass("beforeafter-after");var d=function(e){var t,a,i,n=(t=e,a=s.width(),i=s.height(),{w:a+"px",h:i+"px",cw:t*a+"px",ch:t*i+"px"});l.css("vertical"===r?"top":"left","vertical"===r?n.ch:n.cw),function(e){"vertical"===r?(s.css("clip","rect(0,"+e.w+","+e.ch+",0)"),c.css("clip","rect("+e.ch+","+e.w+","+e.h+",0)")):(s.css("clip","rect(0,"+e.cw+","+e.h+",0)"),c.css("clip","rect(0,"+e.w+","+e.h+","+e.cw+")")),o.css("height",e.h)}(n)},v=function(e,t){var a,o,i;return a="vertical"===r?(t-h)/b:(e-p)/u,o=0,i=1,Math.max(o,Math.min(i,a))};e(window).on("resize.beforeafter",function(e){d(a)});var p=0,h=0,u=0,b=0,_=function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&"vertical"!==r?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&"vertical"===r&&e.preventDefault(),o.addClass("active"),p=o.offset().left,h=o.offset().top,u=s.width(),b=s.height()},w=function(e){o.hasClass("active")&&(a=v(e.pageX,e.pageY),d(a))},m=function(){o.removeClass("active")},g=t.move_with_handle_only?l:o;g.on("movestart",_),g.on("move",w),g.on("moveend",m),t.move_slider_on_hover&&(o.on("mouseenter",_),o.on("mousemove",w),o.on("mouseleave",m)),l.on("touchmove",function(e){e.preventDefault()}),o.find("img").on("mousedown",function(e){e.preventDefault()}),t.click_to_move&&o.on("click",function(e){p=o.offset().left,h=o.offset().top,u=s.width(),b=s.height(),a=v(e.pageX,e.pageY),d(a)}),e(window).trigger("resize.beforeafter")})}}($);